<app-card-layout cardTitle="Cập nhật phân quyền chức năng">
    <ng-template #body>
        <div class="grid">
            <div class="col-12 md:col-4">
                <app-label label="Mã vai trò">
                    <b>{{ code | dataValidator }}</b>
                </app-label>
            </div>
            <div class="col-12 md:col-4">
                <app-label label="Tên vai trò">
                    <b>{{ name | dataValidator }}</b>
                </app-label>
            </div>
            <div class="col-12 md:col-4">
                <app-label label="Loại vai trò">
                    <b>{{ type.name | dataValidator }}</b>
                </app-label>
            </div>
            <!-- <div class="col-12 md:col-4">
                <app-input
                    [autoTrim]="true"
                    [autofocus]="true"
                    label="Mã vai trò"
                    [value]="code"
                    maxLength="255"
                    [required]="true"
                    [error]="errorCode"
                    (onChange)="handleDataChange($event, 'code')"
                ></app-input>
            </div>
            <div class="col-12 md:col-4">
                <app-input
                    [autoTrim]="true"
                    label="Tên vai trò"
                    [value]="name"
                    [required]="true"
                    maxLength="255"
                    [error]="errorName"
                    (onChange)="handleDataChange($event, 'name')"
                ></app-input>
            </div>
            <div class="col-12 md:col-4">
                <app-select
                    label="Loại vai trò"
                    [options]="types"
                    [selectedOption]="type"
                    [required]="true"
                    [error]="errorType"
                    (onChange)="handleDataChange($event, 'type')"
                    placeholder="Chọn loại vai trò"
                ></app-select>
            </div> -->
            <div class="col-12 md:col-12">
                <app-tree-checkbox
                    label="Danh sách phân quyền chức năng"
                    [loading]="treeLoading"
                    [value]="features"
                    [draggableNodes]="true"
                    [droppableNodes]="true"
                    [selection]="selectedFeatures"
                    (onSelectChange)="handleSelectChange($event)"
                    (onNodeDrop)="handleNodeDrop($event)"
                ></app-tree-checkbox>
            </div>
        </div>
    </ng-template>
    <ng-template #footer>
        <div class="flex justify-content-center align-items-center gap-3">
            <app-button
                iocVariant="close"
                (onClick)="handleClose()"
            ></app-button>
            <app-button
                [loading]="loading"
                iocVariant="update"
                (onClick)="handleUpdate()"
            ></app-button>
        </div>
    </ng-template>
</app-card-layout>
